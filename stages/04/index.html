<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>第四關 - 史前國寶的誕生-打剝</title>
    
    <!-- Libs Start -->
    <link rel="stylesheet" href="../../stylesheets/fontawesome-free-5.1.0.min.css">
    <link rel="stylesheet" href="../../stylesheets/bootstrap.min.css">
    <!-- Libs End -->

    <link rel="stylesheet" href="../../stylesheets/application.css">
</head>

<body>
    <div class="container">
        <!-- Navbar Start -->
        <div class="row">
            <div class="col-12">
                <nav class="header d-flex justify-content-between w-100">
                    <img class="logo" src="../../images/logo.png" alt="國立臺灣史前文化博物館">
                    <div clsss="stages-nav">
                        <a class="stage-link" href="../01/index.html">
                            <span>1</span>
                        </a>
                        <a class="stage-link" href="../02/index.html">
                            <span>2</span>
                        </a>
                        <a class="stage-link" href="../03/index.html">
                            <span>3</span>
                        </a>
                        <a class="stage-link" href="../04/index.html">
                            <span>4</span>
                        </a>
                        <a class="stage-link" href="../05/index.html">
                            <span>5</span>
                        </a>
                        <a class="stage-link" href="../06/index.html">
                            <span>6</span>
                        </a>
                        <a class="stage-link" href="../07/index.html">
                            <span>7</span>
                        </a>
                        <a class="stage-link" href="../08/index.html">
                            <span>8</span>
                        </a>
                    </div>
                </nav>
            </div>
        </div>
        <!-- Navbar End -->

        <!-- Main Content Start -->
        <div class="row no-gutters">
            <div class="col-5">
                <div class="game-container">
                    <div class="outer-box mb-3">
                        <div class="inner-box">
                           <div id="phaser-area" class="w-100 h-100"></div>
                        </div>
                    </div>
                    <div class="btn btn-custom btn-block text-center js-run-code">
                        <i class="fas fa-play"></i> 運行
                    </div>
                </div>
            </div>
            <div class="col pl-3">
                <div class="hint-container">
                    <div class="hint-icon"></div>
                    <div class="hint-content">
                        <div class="row no-gutters h-100">
                            <div class="col-1">
                                <h4>提示</h4>
                            </div>
                            <div class="col">
                                <div class="d-flex w-100 h-100 align-items-center">
                                    <p>
                                        撿起石鎚，然後走向玉器半成品進行打剝吧！
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="blockly-container">
                    <div class="blockly-headers row no-gutters w-100">
                        <div class="toolbox-header text-center">
                            程式積木
                        </div>
                        <div class="workspace-header col">
                            工作區
                        </div>
                    </div>
                    <xml id="blockly-toolbox" style="display: none">
                        <block type="step_forward"></block>
                        <block type="turn_x"></block>
                        <block type="repeat_n_times"></block>
                        <block type="pick_up_tool"></block>
                        <block type="hit_break"></block>
                    </xml>
                    <xml xmlns="http://www.w3.org/1999/xhtml" id="blockly-workspace" style="display:none">
                        <block deletable="false" movable="false" type="when_run" id="S)}oe#mNHcQRbK8h1Jdf" x="20" y="20"></block>
                    </xml>
                    <div id="blockly-area" class="w-100" style="height: calc(100% - 30px);"></div>
                    <div id="blockly-instance" style="position: absolute; top: 30px; left: 2px;"></div>
                </div>
            </div>
        </div>
        <!-- Main Content End -->
    </div>

    <!-- Chat Modal Start -->
    <div class="modal chat-modal" id="chat-modal" data-backdrop="static" and data-keyboard="false" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-body">
              <div class="chat-container h-100 mx-auto">
                  <div class="scene"></div>
                  <div class="chat-content"></div>
              </div>
            </div>
          </div>
        </div>
    </div>
    <!-- Chat Modal End -->

    <!-- Alert Modal Start -->
    <div class="modal alert-modal" id="alert-modal" data-backdrop="static" and data-keyboard="false" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-body">
               <div class="content text-center"></div>
               <div class="row actions">
                   <div class="col">
                       <button class="btn btn-block btn-custom" data-dismiss="modal">再玩一次</button>
                   </div>
                   <div class="col next-stage" style="display: none;">
                        <a class="btn btn-block btn-custom" href="../../stages/05/">下一關</a>
                   </div>
               </div>
            </div>
            </div>
        </div>
    </div>
    <!-- Alert Modal End -->

    <!-- Intro Modal Start -->
    <div class="modal intro-modal" id="intro-modal-1" data-backdrop="static" and data-keyboard="false" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-body">
                <div class="row">
                    <div class="col">
                        <img class="w-100" src="../../images/humanoid-jade.jpg">
                        <button class="btn mt-3 btn-block btn-custom" data-dismiss="modal">瞭解了</button>
                    </div>
                    <div class="col">
                        <h3 class="intro-title">猜一猜人獸形玉玦的造形是什麼？獸身兩個小孔有什麼用？</h3>
                        <p class="intro-description">
                            人獸形玉玦造形像不像雙手叉著腰的兩個人，頭部頂著一隻獸？這隻神氣的動物考古學家覺得可能是貓科動物呢！
                            <br>
                            這件人獸形玉玦耳飾獸身有斷裂，史前人在兩側各作一小孔繫上細線繼續配戴，二千多年前的史前人是不是很愛物惜物呢！
                        </p>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
    <!-- Intro Modal End -->

    <!-- Intro Modal Start -->
    <div class="modal intro-modal" id="intro-modal-2" data-backdrop="static" and data-keyboard="false" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-body">
                    <div class="row">
                        <div class="col">
                            <img class="w-100" src="../../images/hit-break.jpg">
                            <button class="btn mt-3 btn-block btn-custom" data-dismiss="modal">瞭解了</button>
                        </div>
                        <div class="col">
                            <h3 class="intro-title">什麼是打剝？會用什麼工具呢？</h3>
                            <p class="intro-description">
                                打剝是很古老的技術，一萬多年以前在臺灣的史前人就有使用。打剝的工具是石錘，史前人會以一手握著石錘，敲擊另一手拿著的石材，或者用石錘敲擊斜立在石砧上的石材，打剝成想要的形狀。史前人製造玉器時通常都是從打剝開始喔！
                            </p>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
        <!-- Intro Modal End -->
    
    <!-- Libs Start -->
    <script src="../../javascripts/jquery-3.3.1.min.js"></script>
    <script src="../../javascripts/bootstrap.bundle-4.1.1.min.js"></script>
    <script src="../../javascripts/phaser-2.11.0.min.js"></script>
    <script src="../../javascripts/blockly_compressed.js"></script>
    <script src="../../javascripts/blocks_compressed.js"></script>
    <script src="../../javascripts/blockly_msg_zh_hant.js"></script>
    <script src="../../javascripts/javascript_compressed.js"></script>
    <script src="../../javascripts/acorn_interpreter.js"></script>
    <!-- Libs End -->

    <script src="../../javascripts/navbar.js"></script>
    <script src="../../javascripts/bgm.js"></script>
    <script src="../../javascripts/custom_blocks.js"></script>
    <script src="../../javascripts/inject_blockly.js"></script>
    <script src="../../javascripts/chat.js"></script>
    <script src="./index.js"></script>

    <script>
        // 初始化遊戲
        window.GAME.initialize();

        //設定對話背景圖與文字
        var selectedCharacter = localStorage.getItem('selectedCharacter') || 'child-a';
        $('.chat-container > .scene').css('background-image', 'url(../../images/stages/04/chat-bg-1-'+ selectedCharacter +'.jpg)')
        var scenes = [
            { actor: '史前人', sentence: '這裡是部落製作玉器的工坊，我們有高超的技術，製作的玉器都很精美哦！我現在要和大家一起做的是人獸形玉玦，你也來試試吧？' },
        ];
        // 開始對話
        window.startChat(scenes, function() {
             $('#intro-modal-1').modal('show'); // 對話結束時，開始人獸形玉玦介紹
        });
        // 人獸形玉玦介紹結束時，開始對話
        $('#intro-modal-1').on('hidden.bs.modal', function() {
            var scenes =  [
                { actor: '現代人', sentence: '這我學的會嗎？' },
                { actor: '史前人', sentence: '別緊張，不會很難的，來，我先教會你製玉的幾個基本技術，讓我們開始練習吧！' },
            ];
            window.startChat(scenes, function() {
                $('#intro-modal-2').modal('show'); // 對話結束時，開始打剝介紹
            });
        });

        // 打剝介紹結束時，開始對話
        $('#intro-modal-2').on('hidden.bs.modal', function() {
            var scenes = [
                { actor: '史前人', sentence: '臺灣玉原石不容易取得，製作時要小心，別敲的太大力哦！' }
            ];
            window.startChat(scenes);
        });

        
    </script>
</body>
</html>